<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12장</title>

    <style>
    th, td {
        padding: 3px;    
    }
    </style>

</head>

<body>
    <h1>웹의 저장소</h1>
    <h3>초기 웹의 저장소</h3>
    웹 서버에 저장<br>
    <br>
    <b>초기 웹 저장의 문제점</b>
    <ul>
        <li>웹 사용의 폭발적 증가</li>
        <li>웹 서버의 저장 용량에 대한 부담</li>
        <li>웹 브라우저와 웹 서버 사이의 통신 트래픽 증가</li>
    </ul>
    <br>
    <h3>HTML5의 웹 저장소</h3>
    사용자의 <b>로컬 컴퓨터</b>에 일부 데이터 저장<br>
    웹 서버의 저장 용량 및 통신 트래픽 감소<br>
    웹 서버와 연결이 끊어진 경우에도 로컴 컴퓨터에서 웹 애플리케이션 실행<br>
    <b>저장소 종류</b>
    <ul>
        <li>쿠키</li>
        <li>웹 스토리지</li>
        <li>로컬 파일</li>
        <li>인덱스트 데이터베이스</li>
    </ul>
    <br>
    <hr>
    <h1>쿠키</h1>
    웹 서버가 브라우저에게 지시하여 사용자 로컬 컴퓨터에 저장하는 4K 이하의 작은 데이터<br>
    <br>
    <h3>쿠키의 도입 배경</h3>
    <b>HTTP 통신의 기본 약점</b>
    <ul>
        <li>브라우저와 웹서버 사이의 통신은 무상태(stateless) 프로토콜임</li>
        <li>
            무상태 프로토콜: 바로 이전 요청과 현재 요청이 연결되어 있음을 기억하지 못함<br>
            예) 지금 'Java'를 검색하는 사용자가 바로 전에 'C++'를 검색한 사용자라는 사실을 모름
        </li>
    </ul>
    <br>
    <b>쿠키는 HTTP에서 무상태 프로토콜의 약점을 보완하기 위해 도입되었다.</b><br>
    <h3>쿠키 데이터 구성과 사례</h3>
    쿠키 구성: 7개의 속성으로 구성<br>
    브라우저가 웹 서버로 쿠키를 전송할 때는 name=value 만 전송<br>
    <img src="./media/1.png" alt="" width="800px"><br>
    <br>
    쿠키 사례: 안전한 통신을 사용할 때만 쿠키 사용<br>
    <img src="./media/2.png" alt="" width="800px"><br>
    <br>
    <hr>
    <h1>자바 스크립트로 쿠키 다루기</h1>
    <b>쿠키 쓰기</b><br>
    <img src="./media/3.png" alt="" width="800px"><br>
    <b>쿠키 읽기</b><br>
    <img src="./media/4.png" alt="" width="800px"><br>
    <hr>
    <h1>웹 스토리지</h1>
    '세션스토리지'와 '로컬스토리지'가 있다.<br>
    <br>
    <b>웹 스토리지의 특징</b> 
    <ul>
        <li>문자열만 저장</li>
        <li>(키, 값)으로 구성된 아이템 단위로 저장</li>
        <li>동일한 '키'를 가진 아이템은 존재할 수 없음</li>
        <li>'키'와 '값' 문자열은 대소문자 구분</li>
        <li>저장, 검색, 삭제 등 웹 스토리지의 조작은 모두 자바스크립트 코드로 작성</li>
    </ul>
    <br>
    <h3>세션 스토리지</h3>
    <ul>
        <li>윈도우에 웹 사이트가 로드될 때 세션 스토리지 생성</li>
        <li>윈도우가 닫힐 때 세션 스토리지 소멸</li>
        <li>윈도우마다 세션 스토리지 별도 생성</li>
        <li>세션 스토리지 공유</li>
        <li>세션 스토리지의 용도: 한 윈도우에서 연결된 웹 사이트의 웹 페이지들끼리 데이터를 주고 받는 임시 저장 공간</li>
    </ul>
    <h3>로컬 스토리지</h3>
    <ul>
        <li>윈도우에 웹 사이트가 로드될 때 로컬 스토리지 생성</li>
        <li>브라우저 종료하거나 컴퓨터가 꺼져도 존재</li>
        <li>윈도우에 상관없이 웹 서버(웹 사이트) 당 하나 씩 생성</li>
        <li>웹 사이트의 모든 웹 페이지가 로컬 스토리지 공유</li>
        <li>로컬 스토리지의 용도: 오프라인상태에서 웹 애플리케이션이 로컬 컴퓨터의 로컬 스토리지에 저장 가능</li>
    </ul>
    <br>
    <hr>
    <h1>자바스크립트로 웹 스토리지 다루기</h1>
    스토리지 인터페이스: 자바스크립트로 웹 스토리지 읽기/쓰기<br>
    <br>
    <table border="2">
        <tr>
            <th>메소드</th><th>설명</th>
        </tr>
        <tr>
            <td>key(index)</td><td>index 위치에 저장된 아이템의 '키' 문자열 반환</td>
        </tr>
        <tr>
            <td>setItem(key, val)</td><td>(key, val) 아이템을 스토리지에 저장, key와 val 모두 문자열</td>
        </tr>
        <tr>
            <td>getItem(key)</td><td>문자열 key의 아이템을 찾아 '값' 문자열 리턴, 아이템 없으면 null 리턴</td>
        </tr>
        <tr>
            <td>removeItem(key)</td><td>문자열 key의 아이템 삭제</td>
        </tr>
        <tr>
            <td>clear()</td><td>스토리지의 모든 아이템 삭제</td>
        </tr>
    </table>
    <br>
    <hr>
    <h1>웹 스토리지 이벤트</h1>
    웹 스토리지 변경 시 발생하는 이벤트<br>
    <br>
    <ul>
        <li>아이템 추가, 삭제, 전체 삭제, 아이템 값 변경 등의 경우</li>
        <li>웹 스토리지를 변경한 윈도우 외 다른 모든 윈도우에게 전달</li>
        <li>window 객체만 storage 이벤트 받을 수 있음</li>
    </ul>
    <br>
    <b>StorageEvent 객체 (웹 스토리지 변경 정보를 담은 이벤트 객체)</b>
    <table border="2">
        <tr>
            <th>프로퍼티</th><th>설명</th>
        </tr>
        <tr>
            <td>key</td><td>변화가 발생한 아이템의 키 문자열, clear()의 실행으로 이벤트가 발생한 경우는 null</td>
        </tr>
        <tr>
            <td>newValue</td><td>변화가 발생한 아이템의 새 '값', clear()의 실행이나 아이템이 삭제되어 이벤트가 발생한 경우는 null</td>
        </tr>
        <tr>
            <td>oldValue</td><td>변화가 발생한 아이템의 이전 '값', clear() 메소드가 호출되어 발생한 경우나 새로운 아이템이 추가되어 발생한 경우는 null</td>
        </tr>
        <tr>
            <td>storageArea</td><td>이벤트가 발생한 웹 스토리지 객체</td>
        </tr>
        <tr>
            <td>url</td><td>이벤트를 유발한 웹 페이지의 URL</td>
        </tr>
    </table>
    <br>
    <img src="./media/5.png" alt="" width="700px"><br>












</body>
</html>